(function(h,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(h=typeof globalThis<"u"?globalThis:h||self,e(h.Vue3KakaoMaps={},h.Vue))})(this,function(h,e){"use strict";const f=e.ref(!1),_=(u,d)=>{const c=document.createElement("script"),t=d!=null&&d.length>0?`&libraries=${d.join(",")}`:"";c.id="kakao-map-api-script",c.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${u}&autoload=false${t}`,document.body.appendChild(c),c.onload=()=>{kakao.maps.load(()=>{f.value=!0})}},B=e.defineComponent({__name:"KakaoMap",props:{width:{default:"40rem"},height:{default:"30rem"},markerList:{},infoWindowList:{},markerCluster:{},lat:{},lng:{},level:{default:3},mapTypeId:{},draggable:{type:Boolean,default:!0},scrollwheel:{type:Boolean,default:!0},disableDoubleClick:{type:Boolean,default:!1},disableDoubleClickZoom:{type:Boolean,default:!1},projectionId:{default:"kakao.maps.ProjectionId.WCONG"},tileAnimation:{type:Boolean,default:!0},keyboardShortcuts:{type:[Boolean,Object]}},emits:["onLoadKakaoMap","onLoadKakaoMapMarkerCluster"],setup(u,{emit:d}){const c=u,t=d,a=e.ref(null),p=e.ref();e.provide("mapRef",p);const i=()=>{const n={center:new kakao.maps.LatLng(c.lat,c.lng),...c};a.value!==null&&(p.value=new window.kakao.maps.Map(a.value,n),t("onLoadKakaoMap",p.value))},g=e.ref(),o=n=>{if(n.markers===void 0)throw new Error("MarkerList가 없습니다.");if(p.value!==null){const k=e.ref([]);n.markers.forEach(r=>{var m;const s=new kakao.maps.Marker({position:new kakao.maps.LatLng(r.lat,r.lng),image:r.image??void 0,title:r.title??void 0,draggable:typeof r.draggable=="boolean"?r.draggable:!1,clickable:typeof r.clickable=="boolean"?r.clickable:!1,zIndex:typeof r.zIndex=="number"?r.zIndex:0,opacity:r.opacity??1,altitude:r.altitude??0,range:r.range??void 0});(m=k.value)==null||m.push(s)}),g.value=new kakao.maps.MarkerClusterer({map:e.toRaw(p.value),...n,markers:k.value}),t("onLoadKakaoMapMarkerCluster",g.value)}};e.onMounted(()=>{f.value&&(i(),c.markerCluster!==void 0&&o(c.markerCluster))}),e.watch(()=>f.value,n=>{n&&(i(),c.markerCluster!==void 0&&o(c.markerCluster))});const l=e.computed(()=>({width:isFinite(+c.width)?c.width+"px":c.width,height:isFinite(+c.height)?c.height+"px":c.height}));return e.watch([()=>c.lat,()=>c.lng],([n,k])=>{var r;(r=p.value)==null||r.panTo(new kakao.maps.LatLng(n,k))}),e.watch(()=>c.draggable,n=>{var k,r;n===void 0||n?(k=p.value)==null||k.setDraggable(!0):(r=p.value)==null||r.setDraggable(!1)}),e.watch(()=>c.level,n=>{var k,r;n===void 0?(k=p.value)==null||k.setLevel(3):(r=p.value)==null||r.setLevel(n)}),e.watch(()=>c.mapTypeId,n=>{var k,r;n===void 0?(k=p.value)==null||k.setMapTypeId(3):(r=p.value)==null||r.setMapTypeId(n)}),e.watch(()=>c.scrollwheel,n=>{var k,r;n===void 0?(k=p.value)==null||k.setZoomable(!0):(r=p.value)==null||r.setZoomable(n)}),e.watch(()=>c.projectionId,n=>{var k,r;n===void 0?(k=p.value)==null||k.setProjectionId(kakao.maps.ProjectionId.WCONG):(r=p.value)==null||r.setProjectionId(n)}),e.watch(()=>c.keyboardShortcuts,n=>{var k,r;n===void 0?(k=p.value)==null||k.setKeyboardShortcuts(!1):typeof n=="boolean"&&((r=p.value)==null||r.setKeyboardShortcuts(n))}),(n,k)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"kakaoMapRef",ref:a,style:e.normalizeStyle(l.value)},[c.markerList&&c.markerCluster===void 0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.markerList,(r,s)=>(e.openBlock(),e.createBlock(e.unref(w),{key:r.key===void 0?s:r.key,lat:r.lat,lng:r.lng,"info-window":r==null?void 0:r.infoWindow,draggable:r.draggable,image:r.image,order:r.order,"order-bottom-margin":r.orderBottomMargin},null,8,["lat","lng","info-window","draggable","image","order","order-bottom-margin"]))),128)):e.createCommentVNode("",!0),c.infoWindowList&&c.markerCluster===void 0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(c.infoWindowList,(r,s)=>(e.openBlock(),e.createBlock(e.unref(y),{key:r.key===void 0?s:r.key,lat:r.lat,lng:r.lng,content:r.content,visible:r.visible},null,8,["lat","lng","content","visible"]))),128)):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"default")],4))}}),I={imageSrc:"https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",imageWidth:29,imageHeight:42,imageOption:{}},w=e.defineComponent({__name:"KakaoMapMarker",props:{lat:{},lng:{},infoWindow:{},visible:{type:Boolean},image:{},title:{},draggable:{type:Boolean},clickable:{type:Boolean},zIndex:{},opacity:{},altitude:{},range:{},order:{},orderBottomMargin:{}},emits:["onLoadKakaoMapMarker","onClickKakaoMapMarker","dragEndKakaoMapMarker","mouseOverKakaoMapMarker","mouseOutKakaoMapMarker","deleteKakaoMapMarker"],setup(u,{emit:d}){const c=d,t=u,a=e.ref(),p=e.inject("mapRef"),i=s=>{if(s!=null){if(s.imageSrc===void 0)throw new Error("이미지 경로가 존재하지 않습니다.")}else s=I;const m=new Image;m.src=s.imageSrc;const M=new kakao.maps.MarkerImage(s.imageSrc,new kakao.maps.Size(s.imageWidth??m.width,s.imageHeight??m.height),s.imageOption);a.value!==void 0&&a.value.setImage(M)},g=s=>{if(t.lat===void 0||t.lng===void 0)throw new Error("marker의 위치가 없습니다.");const m=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.Marker({position:m,title:t.title,draggable:t.draggable,clickable:t.clickable,zIndex:t.zIndex,opacity:t.opacity,altitude:t.altitude,range:t.range}),i(t.image),c("onLoadKakaoMapMarker",a.value),a.value.setMap(s),o(a.value),n(a.value),k(a.value),l(s,a.value)},o=s=>{kakao.maps.event.addListener(s,"click",()=>{c("onClickKakaoMapMarker")})},l=(s,m)=>{kakao.maps.event.addListener(m,"dragend",function(M){c("dragEndKakaoMapMarker",m)})},n=s=>{kakao.maps.event.addListener(s,"mouseover",()=>{c("mouseOverKakaoMapMarker")})},k=s=>{kakao.maps.event.addListener(s,"mouseout",()=>{c("mouseOutKakaoMapMarker")})},r=s=>`<div style="position:relative; bottom:${t.orderBottomMargin}">
        ${s}
      </div>`;return e.onBeforeUnmount(()=>{var s;c("deleteKakaoMapMarker",a),(s=a.value)==null||s.setMap(null)}),e.watch([()=>f.value,()=>p,()=>p==null?void 0:p.value],([s,m,M])=>{s&&m!==void 0&&M!==void 0&&g(M)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([s,m])=>{var M;f.value&&((M=a.value)==null||M.setPosition(new kakao.maps.LatLng(s,m)))}),e.watch([()=>t.image],()=>{i(t.image)}),e.watch(()=>t.title,s=>{var m;s!==void 0&&((m=a.value)==null||m.setTitle(s))}),e.watch(()=>t.draggable,s=>{var m;(m=a.value)==null||m.setDraggable(s!==void 0&&s)}),e.watch(()=>t.clickable,s=>{var m;(m=a.value)==null||m.setDraggable(s!==void 0&&s)}),e.watch(()=>t.zIndex,s=>{var m;s!==void 0&&isFinite(s)&&((m=a.value)==null||m.setZIndex(Number(s)))}),e.watch(()=>t.opacity,s=>{var m,M;s!==void 0&&isFinite(s)?(m=a.value)==null||m.setOpacity(Number(s)):(M=a.value)==null||M.setOpacity(1)}),(s,m)=>{var M,C,K;return e.openBlock(),e.createElementBlock("div",null,[s.$slots.infoWindow?(e.openBlock(),e.createBlock(e.unref(y),{key:0,marker:a.value,lat:t.lat,lng:t.lng,visible:(M=t==null?void 0:t.infoWindow)==null?void 0:M.visible},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"infoWindow")]),_:3},8,["marker","lat","lng","visible"])):t.infoWindow?(e.openBlock(),e.createBlock(e.unref(y),{key:1,marker:a.value,lat:t.lat,lng:t.lng,content:(C=t==null?void 0:t.infoWindow)==null?void 0:C.content,visible:(K=t==null?void 0:t.infoWindow)==null?void 0:K.visible},null,8,["marker","lat","lng","content","visible"])):e.createCommentVNode("",!0),t.order?(e.openBlock(),e.createBlock(e.unref(L),{key:2,lat:t.lat,lng:t.lng,"y-anchor":0,content:r(t.order)},null,8,["lat","lng","content"])):e.createCommentVNode("",!0)])}}}),O={key:0},y=e.defineComponent({__name:"KakaoMapInfoWindow",props:{lat:{},lng:{},marker:{},content:{},disableAutoPan:{type:Boolean},removable:{type:Boolean,default:!1},zIndex:{},altitude:{},range:{default:500},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapInfoWindow"],setup(u,{emit:d}){const c=d,t=u,a=e.ref(),p=e.ref(),i=e.inject("mapRef"),g=o=>{var n,k;if(t.lat===void 0||t.lng===void 0)throw new Error("infoWindow의 위치가 없습니다.");const l=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.InfoWindow({position:l,content:p.value??t.content??"",removable:t.removable,disableAutoPan:t.disableAutoPan,zIndex:t.zIndex,altitude:t.altitude,range:t.range}),t.visible&&(c("onLoadKakaoMapInfoWindow",a.value),t.marker!==void 0?(n=a==null?void 0:a.value)==null||n.open(o,t.marker):(k=a==null?void 0:a.value)==null||k.open(o))};return e.onBeforeUnmount(()=>{(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),e.watch([()=>f.value,()=>i==null?void 0:i.value,()=>f,()=>i],([o,l])=>{t.visible&&o&&l!==void 0&&l!==null&&g(l)},{immediate:!0}),e.watch(()=>t.marker,o=>{var l,n,k;!t.visible||(i==null?void 0:i.value)===void 0||(a.value!=null&&((l=a.value)==null||l.close()),o!==void 0?(n=a==null?void 0:a.value)==null||n.open(i==null?void 0:i.value,o):(k=a==null?void 0:a.value)==null||k.open(i==null?void 0:i.value))},{immediate:!0}),e.watch([()=>p==null?void 0:p.value,()=>p],([o,l])=>{var n;o!==void 0&&((n=a.value)==null||n.setContent(o))},{deep:!0}),e.watch([()=>t.lat,()=>t.lng],([o,l])=>{var n;(n=a.value)==null||n.setPosition(new kakao.maps.LatLng(o,l))}),e.watch(()=>t.content,o=>{var l;(l=a.value)==null||l.setContent(o??"")}),e.watch(()=>t.zIndex,o=>{var l;(l=a.value)==null||l.setZIndex(o??0)}),e.watch(()=>t.altitude,o=>{var l;(l=a.value)==null||l.setAltitude(o??0)}),e.watch(()=>t.range,o=>{var l;(l=a.value)==null||l.setRange(o??500)}),e.watch(()=>t.visible,o=>{o?f!=null&&f.value&&(i==null?void 0:i.value)!==void 0&&(i==null?void 0:i.value)!==null&&g(i.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),(o,l)=>t.content&&t.content.length>0||o.$slots.default?(e.openBlock(),e.createElementBlock("div",O,[o.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:p},[e.renderSlot(o.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),E={key:0},L=e.defineComponent({__name:"KakaoMapCustomOverlay",props:{lat:{},lng:{},content:{},xAnchor:{default:.5},yAnchor:{default:.5},zIndex:{},clickable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapCustomOverlay"],setup(u,{emit:d}){const c=d,t=u,a=e.ref(),p=e.ref(),i=e.inject("mapRef"),g=o=>{if(t.lat===void 0||t.lng===void 0)throw new Error("KakaoMapCustomOverlay의 위치가 없습니다.");const l=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.CustomOverlay({position:l,content:p.value??t.content??"",xAnchor:t.xAnchor,yAnchor:t.yAnchor,zIndex:t.zIndex,clickable:t.clickable}),t.visible&&(a.value.setMap(o),c("onLoadKakaoMapCustomOverlay",a.value))};return e.onBeforeUnmount(()=>{var o;a.value!==null&&((o=a.value)==null||o.setMap(null))}),e.watch([()=>f.value,()=>i==null?void 0:i.value,()=>f,()=>i],([o,l])=>{t.visible&&o&&l!==void 0&&l!==null&&g(l)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([o,l])=>{var n;(n=a.value)==null||n.setPosition(new kakao.maps.LatLng(o,l))}),e.watch(()=>t.content,o=>{var l;(l=a.value)==null||l.setContent(o??"")}),e.watch(()=>t.zIndex,o=>{var l;(l=a.value)==null||l.setZIndex(o??0)}),e.watch(()=>t.visible,o=>{var l;o?f!=null&&f.value&&(i==null?void 0:i.value)!==void 0&&(i==null?void 0:i.value)!==null&&g(i.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&((l=a.value)==null||l.setMap(null))}),(o,l)=>t.content&&t.content.length>0||o.$slots.default?(e.openBlock(),e.createElementBlock("div",E,[o.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:p},[e.renderSlot(o.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),b=e.defineComponent({__name:"KakaoMapPolyline",props:{latLngList:{},endArrow:{type:Boolean},strokeWeight:{default:3},strokeColor:{default:"#F10000"},strokeOpacity:{default:.6},strokeStyle:{default:"solid"},zIndex:{}},setup(u){const d=u,c=e.inject("mapRef");let t=null;const a=e.computed(()=>d.latLngList.map(i=>new kakao.maps.LatLng(i.lat,i.lng))),p=i=>{t=new kakao.maps.Polyline({path:a.value,endArrow:d.endArrow,strokeWeight:d.strokeWeight,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeStyle:d.strokeStyle,zIndex:d.zIndex}),t.setMap(i)};return e.watch([()=>f.value,()=>c==null?void 0:c.value,()=>f,()=>c],([i,g])=>{i&&g!==void 0&&g!==null&&p(g)},{immediate:!0}),e.watch(()=>d.latLngList,()=>{t==null||t.setPath(a.value)},{deep:!0}),e.watch(()=>d.endArrow,()=>{t==null||t.setMap(null),c!==void 0&&p(c.value)}),e.watch([()=>d.strokeWeight,()=>d.strokeColor,()=>d.strokeOpacity,()=>d.strokeStyle],([i,g,o,l])=>{t==null||t.setOptions({strokeWeight:i,strokeColor:g,strokeOpacity:o,strokeStyle:l})}),e.watch(()=>d.zIndex,i=>{i!==void 0&&(t==null||t.setZIndex(i))}),e.onBeforeUnmount(()=>{t==null||t.setMap(null)}),(i,g)=>(e.openBlock(),e.createElementBlock("div",null,[e.renderSlot(i.$slots,"default")]))}}),S={key:0},P={key:1},v=e.defineComponent({__name:"KakaoMapMarkerPolyline",props:{markerList:{},endArrow:{type:Boolean},strokeWeight:{},strokeColor:{},strokeOpacity:{},strokeStyle:{},zIndex:{},showMarkerOrder:{type:Boolean}},setup(u){const d=u,c=e.inject("mapRef"),t=e.ref([]),a=o=>{t.value.push(o)},p=o=>{const l=t.value.indexOf(o);t.value.splice(l,1)},i=o=>{const l=d.markerList,n=t.value.indexOf(o);l[n].lat=o.getPosition().getLat(),l[n].lng=o.getPosition().getLng()},g=(o,l)=>`<div style="position:relative; bottom:${l}">
        ${o}
      </div>`;return(o,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[d.markerList&&e.unref(c)!==null?(e.openBlock(),e.createElementBlock("div",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(n,k)=>(e.openBlock(),e.createBlock(e.unref(w),{id:k,key:n.key===void 0?k:n.key,map:e.unref(c),lat:n.lat,lng:n.lng,draggable:n.draggable,image:n.image,onOnLoadKakaoMapMarker:a,onDragEndKakaoMapMarker:i,onDeleteKakaoMapMarker:p},null,8,["id","map","lat","lng","draggable","image"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(n,k)=>(e.openBlock(),e.createElementBlock("div",{key:k},[k!==d.markerList.length-1?(e.openBlock(),e.createBlock(e.unref(b),{key:0,latLngList:[{lat:d.markerList[k].lat,lng:d.markerList[k].lng},{lat:d.markerList[k+1].lat,lng:d.markerList[k+1].lng}],endArrow:d.endArrow,strokeWeight:d.strokeWeight,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeStyle:d.strokeStyle,zIndex:d.zIndex},null,8,["latLngList","endArrow","strokeWeight","strokeColor","strokeOpacity","strokeStyle","zIndex"])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0),d.markerList&&d.showMarkerOrder?(e.openBlock(),e.createElementBlock("div",P,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(n,k)=>(e.openBlock(),e.createBlock(e.unref(L),{key:k,lat:n.lat,lng:n.lng,"y-anchor":0,content:g(n.order!==void 0?n.order:k,n.orderBottomMargin)},null,8,["lat","lng","content"]))),128))])):e.createCommentVNode("",!0),e.renderSlot(o.$slots,"default")],64))}}),$={install:u=>{u.component("KakaoMap",B),u.component("KakaoMapMarker",w),u.component("KakaoMapCustomOverlay",L),u.component("KakaoMapInfoWindow",y),u.component("KakaoMapMarkerPolyline",v),u.component("KakaoMapPolyline",b)}};h.KakaoMap=B,h.KakaoMapCustomOverlay=L,h.KakaoMapInfoWindow=y,h.KakaoMapMarker=w,h.KakaoMapMarkerPolyline=v,h.KakaoMapPolyline=b,h.Vue3KakaoMaps=$,h.isKakaoMapApiLoaded=f,h.useKakao=_,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
